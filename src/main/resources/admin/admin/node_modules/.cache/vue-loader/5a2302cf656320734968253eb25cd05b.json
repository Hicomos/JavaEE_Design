{"remainingRequest":"D:\\User\\Desktop\\task_1.0\\src\\main\\resources\\admin\\admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\User\\Desktop\\task_1.0\\src\\main\\resources\\admin\\admin\\src\\views\\modules\\renwuChat\\add-or-update.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\User\\Desktop\\task_1.0\\src\\main\\resources\\admin\\admin\\src\\views\\modules\\renwuChat\\add-or-update.vue","mtime":1734260160468},{"path":"D:\\User\\Desktop\\task_1.0\\src\\main\\resources\\admin\\admin\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"D:\\User\\Desktop\\task_1.0\\src\\main\\resources\\admin\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\User\\Desktop\\task_1.0\\src\\main\\resources\\admin\\admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CiAgICBleHBvcnQgZGVmYXVsdCB7CiAgICAgICAgZGF0YSgpIHsKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgIGlkOiAiIiwKICAgICAgICAgICAgICAgIHJ1bGVGb3JtOiB7fSwKICAgICAgICAgICAgICAgIGRhdGFMaXN0OiBbXSwKICAgICAgICAgICAgICAgIGNoYXREYXRlOiB7fSwKICAgICAgICAgICAgICAgIHJ1bGVzOiB7CiAgICAgICAgICAgICAgICAgICAgcmVud3VDaGF0UmVwbHlUZXh0OiBbewogICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogIuWbnuWkjeWGheWuueS4jeiDveS4uuepuiIsCiAgICAgICAgICAgICAgICAgICAgICAgIHRyaWdnZXI6ICJibHVyIgogICAgICAgICAgICAgICAgICAgIH1dCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgaW50ZXI6IG51bGwKICAgICAgICAgICAgfTsKICAgICAgICB9LAogICAgICAgIHByb3BzOiBbInBhcmVudCJdLAogICAgICAgIG1ldGhvZHM6IHsKICAgICAgICAgICAgLy8g5Yid5aeL5YyWCiAgICAgICAgICAgIGluaXQocm93KSB7CiAgICAgICAgICAgICAgICB0aGlzLmNoYXREYXRlID0gcm93CiAgICAgICAgICAgICAgICB0aGlzLmlkID0gcm93LmppZXF1eW9uZ2h1SWQ7CiAgICAgICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICAgICAgICAgICAgX3RoaXMuZ2V0TGlzdCgpOwogICAgICAgICAgICAgICAgdmFyIGludGVyID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgX3RoaXMuZ2V0TGlzdCgpOwogICAgICAgICAgICAgICAgfSwgNTAwMCkKICAgICAgICAgICAgICAgIHRoaXMuaW50ZXIgPSBpbnRlcjsKICAgICAgICAgICAgfSwKCiAgICAgICAgICAgIGdldExpc3QoKSB7CiAgICAgICAgICAgICAgICBsZXQgcGFyYW1zID0gewogICAgICAgICAgICAgICAgICAgIGppZXF1eW9uZ2h1SWQ6IHRoaXMuaWQsCiAgICAgICAgICAgICAgICAgICAgb3JkZXI6J2FzYycsCiAgICAgICAgICAgICAgICAgICAgbGltaXQ6JzEwMDAwMDAwJywKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHRoaXMuJGh0dHAoewogICAgICAgICAgICAgICAgICAgIHVybDogJ3Jlbnd1Q2hhdC9wYWdlJywKICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICJnZXQiLAogICAgICAgICAgICAgICAgICAgIHBhcmFtczogcGFyYW1zCiAgICAgICAgICAgICAgICB9KS50aGVuKCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YQogICAgICAgICAgICAgICAgICAgICAgICAgfSkgPT4gewogICAgICAgICAgICAgICAgICAgIGlmIChkYXRhICYmIGRhdGEuY29kZSA9PT0gMCkgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJ1bGVGb3JtLmppZXF1eW9uZ2h1SWQgPSB0aGlzLmlkOwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGFMaXN0ID0gZGF0YS5kYXRhLmxpc3Q7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcihkYXRhLm1zZyk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIC8v5Zu+54mHCiAgICAgICAgICAgIHJlbnd1Q2hhdFJlcGx5UGhvdG9VcGxvYWRDaGFuZ2UoZmlsZVVybHMpIHsKICAgICAgICAgICAgICAgIHRoaXMucnVsZUZvcm0ucmVud3VDaGF0UmVwbHlQaG90byA9IGZpbGVVcmxzOwogICAgICAgICAgICAgICAgdGhpcy5hZGRFZGl0VXBsb2FkU3R5bGVDaGFuZ2UoKQogICAgICAgICAgICB9LAogICAgICAgICAgICAvLyDmj5DkuqQKICAgICAgICAgICAgb25TdWJtaXQoKSB7CiAgICAgICAgICAgICAgICB0aGlzLiRyZWZzWyJydWxlRm9ybSJdLnZhbGlkYXRlKHZhbGlkID0+IHsKICAgICAgICAgICAgICAgICAgICB0aGlzLnJ1bGVGb3JtLnJlcGx5VGltZSA9IHRoaXMuZ2V0Q3VyRGF0ZVRpbWUoKQogICAgICAgICAgICAgICAgICAgIHRoaXMucnVsZUZvcm0ucmVud3VDaGF0VHlwZXMgPSAyCiAgICAgICAgICAgICAgICAgICAgdGhpcy5ydWxlRm9ybS5yZXBseVRpbWUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKQogICAgICAgICAgICAgICAgICAgIGlmICh2YWxpZCkgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRodHRwKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybDogJ3Jlbnd1Q2hhdC9zYXZlJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogInBvc3QiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogdGhpcy5ydWxlRm9ybQogICAgICAgICAgICAgICAgICAgICAgICB9KS50aGVuKCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkYXRhICYmIGRhdGEuY29kZSA9PT0gMCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAi5pON5L2c5oiQ5YqfIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogMTUwMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbG9zZTogKCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRMaXN0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJ1bGVGb3JtLnJlbnd1Q2hhdFJlcGx5VGV4dCA9ICIiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ydWxlRm9ybS5yZW53dUNoYXRSZXBseVBob3RvID0gIiI7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGF0RGF0ZS56aHVhbmd0YWlUeXBlcyA9IDIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJGh0dHAoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybDogJ3Jlbnd1Q2hhdC91cGRhdGUnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogInBvc3QiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHRoaXMuY2hhdERhdGUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLnRoZW4oKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSA9PiB7fSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcihkYXRhLm1zZyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9LAogICAgICAgICAgICAvLyDov5Tlm54KICAgICAgICAgICAgYmFjaygpIHsKICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LnNob3dGbGFnID0gZmFsc2U7CiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5nZXREYXRhTGlzdCgpOwogICAgICAgICAgICAgICAgaWYgKHRoaXMuaW50ZXIpIHsKICAgICAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKHRoaXMuaW50ZXIpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfTsK"},{"version":3,"sources":["add-or-update.vue"],"names":[],"mappings":";AAoCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"add-or-update.vue","sourceRoot":"src/views/modules/renwuChat","sourcesContent":["<template>\n    <div>\n        <el-form class=\"detail-form-content\" ref=\"ruleForm\" :model=\"ruleForm\" :rules=\"rules\" label-width=\"80px\">\n            <div class=\"chat-content\">\n                <div v-bind:key=\"item.id\" v-for=\"item in dataList\">\n                    <div v-if=\"item.renwuChatIssueText\" class=\"left-content\">\n                        <el-alert class=\"text-content\" :title=\"item.renwuChatIssueText\" :closable=\"false\"\n                                  type=\"success\">\n                            <img v-if=\"item.renwuChatIssuePhoto\" :src=\"$base.url+item.renwuChatIssuePhoto\"\n                                 width=\"100\" height=\"100\">\n                        </el-alert>\n                        <el-alert class=\"text-content\" :title=\"item.issueTime\" :closable=\"false\" type=\"success\"></el-alert>\n                    </div>\n                    <div v-if=\"item.renwuChatReplyText\" class=\"right-content\">\n                        <el-alert class=\"text-content\" :title=\"item.renwuChatReplyText\" :closable=\"false\"\n                                  type=\"warning\">\n                            <img v-if=\"item.renwuChatReplyPhoto\" :src=\"$base.url+item.renwuChatReplyPhoto\"\n                                 width=\"100\" height=\"100\">\n                        </el-alert>\n                        <el-alert class=\"text-content\" :title=\"item.replyTime\" :closable=\"false\" type=\"warning\"></el-alert>\n                    </div>\n                    <div class=\"clear-float\"></div>\n                </div>\n            </div>\n            <div class=\"clear-float\"></div>\n            <el-form-item label=\"回复\" prop=\"renwuChatReplyText\">\n                <el-input v-model=\"ruleForm.renwuChatReplyText\" placeholder=\"回复\" clearable></el-input>\n            </el-form-item>\n            <el-form-item>\n                <el-button type=\"primary\" @click=\"onSubmit\">回复</el-button>\n                <el-button @click=\"back()\">返回</el-button>\n            </el-form-item>\n        </el-form>\n    </div>\n</template>\n<script>\n    export default {\n        data() {\n            return {\n                id: \"\",\n                ruleForm: {},\n                dataList: [],\n                chatDate: {},\n                rules: {\n                    renwuChatReplyText: [{\n                        required: true,\n                        message: \"回复内容不能为空\",\n                        trigger: \"blur\"\n                    }]\n                },\n                inter: null\n            };\n        },\n        props: [\"parent\"],\n        methods: {\n            // 初始化\n            init(row) {\n                this.chatDate = row\n                this.id = row.jiequyonghuId;\n                var _this = this;\n                _this.getList();\n                var inter = setInterval(function() {\n                    _this.getList();\n                }, 5000)\n                this.inter = inter;\n            },\n\n            getList() {\n                let params = {\n                    jiequyonghuId: this.id,\n                    order:'asc',\n                    limit:'10000000',\n                }\n                this.$http({\n                    url: 'renwuChat/page',\n                    method: \"get\",\n                    params: params\n                }).then(({\n                             data\n                         }) => {\n                    if (data && data.code === 0) {\n                        this.ruleForm.jiequyonghuId = this.id;\n                        this.dataList = data.data.list;\n                    } else {\n                        this.$message.error(data.msg);\n                    }\n                });\n            },\n            //图片\n            renwuChatReplyPhotoUploadChange(fileUrls) {\n                this.ruleForm.renwuChatReplyPhoto = fileUrls;\n                this.addEditUploadStyleChange()\n            },\n            // 提交\n            onSubmit() {\n                this.$refs[\"ruleForm\"].validate(valid => {\n                    this.ruleForm.replyTime = this.getCurDateTime()\n                    this.ruleForm.renwuChatTypes = 2\n                    this.ruleForm.replyTime = new Date().getTime()\n                    if (valid) {\n                        this.$http({\n                            url: 'renwuChat/save',\n                            method: \"post\",\n                            data: this.ruleForm\n                        }).then(({\n                                     data\n                                 }) => {\n                            if (data && data.code === 0) {\n                                this.$message({\n                                    message: \"操作成功\",\n                                    type: \"success\",\n                                    duration: 1500,\n                                    onClose: () => {\n                                        this.getList();\n                                        this.ruleForm.renwuChatReplyText = \"\";\n                                        this.ruleForm.renwuChatReplyPhoto = \"\";\n\n                                        this.chatDate.zhuangtaiTypes = 2\n                                        this.$http({\n                                            url: 'renwuChat/update',\n                                            method: \"post\",\n                                            data: this.chatDate\n                                        }).then(({\n                                                     data\n                                                 }) => {});\n                                    }\n                                });\n                            } else {\n                                this.$message.error(data.msg);\n                            }\n                        });\n                    }\n                });\n            },\n            // 返回\n            back() {\n                this.parent.showFlag = false;\n                this.parent.getDataList();\n                if (this.inter) {\n                    clearInterval(this.inter);\n                }\n            }\n        }\n    };\n</script><style lang=\"scss\">\n    .chat-content {\n        margin-left: 80px;\n        padding-bottom: 60px;\n        width: 500px;\n        margin-bottom: 30px;\n        max-height: 300px;\n        height: 300px;\n        overflow-y: scroll;\n        border: 1px solid #eeeeee;\n\n    .left-content {\n        float: left;\n        margin-bottom: 10px;\n        padding: 10px;\n    }\n\n    .right-content {\n        float: right;\n        margin-bottom: 10px;\n        padding: 10px;\n    }\n    }\n\n    .clear-float {\n        clear: both;\n    }\n</style>\n\n"]}]}